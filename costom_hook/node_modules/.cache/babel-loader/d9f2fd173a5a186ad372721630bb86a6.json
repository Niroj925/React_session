{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { noop, off, on } from './misc/util'; // const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {\n\nvar usePermission = function (permissionDesc) {\n  var _a = useState(''),\n      state = _a[0],\n      setState = _a[1];\n\n  useEffect(function () {\n    var mounted = true;\n    var permissionStatus = null;\n\n    var onChange = function () {\n      if (!mounted) {\n        return;\n      }\n\n      setState(function () {\n        var _a;\n\n        return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : '';\n      });\n    };\n\n    navigator.permissions.query(permissionDesc).then(function (status) {\n      permissionStatus = status;\n      on(permissionStatus, 'change', onChange);\n      onChange();\n    }).catch(noop);\n    return function () {\n      permissionStatus && off(permissionStatus, 'change', onChange);\n      mounted = false;\n      permissionStatus = null;\n    };\n  }, [permissionDesc]);\n  return state;\n};\n\nexport default usePermission;","map":{"version":3,"names":["useEffect","useState","noop","off","on","usePermission","permissionDesc","_a","state","setState","mounted","permissionStatus","onChange","navigator","permissions","query","then","status","catch"],"sources":["/home/neo-j-thapa/Documents/React/costom_hook/node_modules/react-use/esm/usePermission.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { noop, off, on } from './misc/util';\n// const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {\nvar usePermission = function (permissionDesc) {\n    var _a = useState(''), state = _a[0], setState = _a[1];\n    useEffect(function () {\n        var mounted = true;\n        var permissionStatus = null;\n        var onChange = function () {\n            if (!mounted) {\n                return;\n            }\n            setState(function () { var _a; return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : ''; });\n        };\n        navigator.permissions\n            .query(permissionDesc)\n            .then(function (status) {\n            permissionStatus = status;\n            on(permissionStatus, 'change', onChange);\n            onChange();\n        })\n            .catch(noop);\n        return function () {\n            permissionStatus && off(permissionStatus, 'change', onChange);\n            mounted = false;\n            permissionStatus = null;\n        };\n    }, [permissionDesc]);\n    return state;\n};\nexport default usePermission;\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,EAApB,QAA8B,aAA9B,C,CACA;;AACA,IAAIC,aAAa,GAAG,UAAUC,cAAV,EAA0B;EAC1C,IAAIC,EAAE,GAAGN,QAAQ,CAAC,EAAD,CAAjB;EAAA,IAAuBO,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAjC;EAAA,IAAsCE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAAnD;;EACAP,SAAS,CAAC,YAAY;IAClB,IAAIU,OAAO,GAAG,IAAd;IACA,IAAIC,gBAAgB,GAAG,IAAvB;;IACA,IAAIC,QAAQ,GAAG,YAAY;MACvB,IAAI,CAACF,OAAL,EAAc;QACV;MACH;;MACDD,QAAQ,CAAC,YAAY;QAAE,IAAIF,EAAJ;;QAAQ,OAAO,CAACA,EAAE,GAAGI,gBAAgB,KAAK,IAArB,IAA6BA,gBAAgB,KAAK,KAAK,CAAvD,GAA2D,KAAK,CAAhE,GAAoEA,gBAAgB,CAACH,KAA3F,MAAsG,IAAtG,IAA8GD,EAAE,KAAK,KAAK,CAA1H,GAA8HA,EAA9H,GAAmI,EAA1I;MAA+I,CAAtK,CAAR;IACH,CALD;;IAMAM,SAAS,CAACC,WAAV,CACKC,KADL,CACWT,cADX,EAEKU,IAFL,CAEU,UAAUC,MAAV,EAAkB;MACxBN,gBAAgB,GAAGM,MAAnB;MACAb,EAAE,CAACO,gBAAD,EAAmB,QAAnB,EAA6BC,QAA7B,CAAF;MACAA,QAAQ;IACX,CAND,EAOKM,KAPL,CAOWhB,IAPX;IAQA,OAAO,YAAY;MACfS,gBAAgB,IAAIR,GAAG,CAACQ,gBAAD,EAAmB,QAAnB,EAA6BC,QAA7B,CAAvB;MACAF,OAAO,GAAG,KAAV;MACAC,gBAAgB,GAAG,IAAnB;IACH,CAJD;EAKH,CAtBQ,EAsBN,CAACL,cAAD,CAtBM,CAAT;EAuBA,OAAOE,KAAP;AACH,CA1BD;;AA2BA,eAAeH,aAAf"},"metadata":{},"sourceType":"module"}