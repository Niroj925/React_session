{"ast":null,"code":"import { useEffect, useMemo, useState } from 'react';\nexport var ZoomState;\n\n(function (ZoomState) {\n  ZoomState[\"ZOOMING_IN\"] = \"ZOOMING_IN\";\n  ZoomState[\"ZOOMING_OUT\"] = \"ZOOMING_OUT\";\n})(ZoomState || (ZoomState = {}));\n\nvar usePinchZoom = function (ref) {\n  var cacheRef = useMemo(function () {\n    return {\n      evCache: [],\n      prevDiff: -1\n    };\n  }, [ref.current]);\n\n  var _a = useState(),\n      zoomingState = _a[0],\n      setZoomingState = _a[1];\n\n  var pointermove_handler = function (ev) {\n    // This function implements a 2-pointer horizontal pinch/zoom gesture.\n    //\n    // If the distance between the two pointers has increased (zoom in),\n    // the target element's background is changed to 'pink' and if the\n    // distance is decreasing (zoom out), the color is changed to 'lightblue'.\n    //\n    // This function sets the target element's border to 'dashed' to visually\n    // indicate the pointer's target received a move event.\n    // Find this event in the cache and update its record with this event\n    for (var i = 0; i < cacheRef.evCache.length; i++) {\n      if (ev.pointerId == cacheRef.evCache[i].pointerId) {\n        cacheRef.evCache[i] = ev;\n        break;\n      }\n    } // If two pointers are down, check for pinch gestures\n\n\n    if (cacheRef.evCache.length == 2) {\n      // console.log(prevDiff)\n      // Calculate the distance between the two pointers\n      var curDiff = Math.abs(cacheRef.evCache[0].clientX - cacheRef.evCache[1].clientX);\n\n      if (cacheRef.prevDiff > 0) {\n        if (curDiff > cacheRef.prevDiff) {\n          // The distance between the two pointers has increased\n          setZoomingState([ZoomState.ZOOMING_IN, curDiff]);\n        }\n\n        if (curDiff < cacheRef.prevDiff) {\n          // The distance between the two pointers has decreased\n          setZoomingState([ZoomState.ZOOMING_OUT, curDiff]);\n        }\n      } // Cache the distance for the next move event\n\n\n      cacheRef.prevDiff = curDiff;\n    }\n  };\n\n  var pointerdown_handler = function (ev) {\n    // The pointerdown event signals the start of a touch interaction.\n    // This event is cached to support 2-finger gestures\n    cacheRef.evCache.push(ev); // console.log('pointerDown', ev);\n  };\n\n  var pointerup_handler = function (ev) {\n    // Remove this pointer from the cache and reset the target's\n    // background and border\n    remove_event(ev); // If the number of pointers down is less than two then reset diff tracker\n\n    if (cacheRef.evCache.length < 2) {\n      cacheRef.prevDiff = -1;\n    }\n  };\n\n  var remove_event = function (ev) {\n    // Remove this event from the target's cache\n    for (var i = 0; i < cacheRef.evCache.length; i++) {\n      if (cacheRef.evCache[i].pointerId == ev.pointerId) {\n        cacheRef.evCache.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (ref === null || ref === void 0 ? void 0 : ref.current) {\n      ref.current.onpointerdown = pointerdown_handler;\n      ref.current.onpointermove = pointermove_handler;\n      ref.current.onpointerup = pointerup_handler;\n      ref.current.onpointercancel = pointerup_handler;\n      ref.current.onpointerout = pointerup_handler;\n      ref.current.onpointerleave = pointerup_handler;\n    }\n  }, [ref === null || ref === void 0 ? void 0 : ref.current]);\n  return zoomingState ? {\n    zoomingState: zoomingState[0],\n    pinchState: zoomingState[1]\n  } : {\n    zoomingState: null,\n    pinchState: 0\n  };\n};\n\nexport default usePinchZoom;","map":{"version":3,"names":["useEffect","useMemo","useState","ZoomState","usePinchZoom","ref","cacheRef","evCache","prevDiff","current","_a","zoomingState","setZoomingState","pointermove_handler","ev","i","length","pointerId","curDiff","Math","abs","clientX","ZOOMING_IN","ZOOMING_OUT","pointerdown_handler","push","pointerup_handler","remove_event","splice","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerout","onpointerleave","pinchState"],"sources":["/home/neo-j-thapa/Documents/React/costom_hook/node_modules/react-use/esm/usePinchZoom.js"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nexport var ZoomState;\n(function (ZoomState) {\n    ZoomState[\"ZOOMING_IN\"] = \"ZOOMING_IN\";\n    ZoomState[\"ZOOMING_OUT\"] = \"ZOOMING_OUT\";\n})(ZoomState || (ZoomState = {}));\nvar usePinchZoom = function (ref) {\n    var cacheRef = useMemo(function () { return ({\n        evCache: [],\n        prevDiff: -1,\n    }); }, [ref.current]);\n    var _a = useState(), zoomingState = _a[0], setZoomingState = _a[1];\n    var pointermove_handler = function (ev) {\n        // This function implements a 2-pointer horizontal pinch/zoom gesture.\n        //\n        // If the distance between the two pointers has increased (zoom in),\n        // the target element's background is changed to 'pink' and if the\n        // distance is decreasing (zoom out), the color is changed to 'lightblue'.\n        //\n        // This function sets the target element's border to 'dashed' to visually\n        // indicate the pointer's target received a move event.\n        // Find this event in the cache and update its record with this event\n        for (var i = 0; i < cacheRef.evCache.length; i++) {\n            if (ev.pointerId == cacheRef.evCache[i].pointerId) {\n                cacheRef.evCache[i] = ev;\n                break;\n            }\n        }\n        // If two pointers are down, check for pinch gestures\n        if (cacheRef.evCache.length == 2) {\n            // console.log(prevDiff)\n            // Calculate the distance between the two pointers\n            var curDiff = Math.abs(cacheRef.evCache[0].clientX - cacheRef.evCache[1].clientX);\n            if (cacheRef.prevDiff > 0) {\n                if (curDiff > cacheRef.prevDiff) {\n                    // The distance between the two pointers has increased\n                    setZoomingState([ZoomState.ZOOMING_IN, curDiff]);\n                }\n                if (curDiff < cacheRef.prevDiff) {\n                    // The distance between the two pointers has decreased\n                    setZoomingState([ZoomState.ZOOMING_OUT, curDiff]);\n                }\n            }\n            // Cache the distance for the next move event\n            cacheRef.prevDiff = curDiff;\n        }\n    };\n    var pointerdown_handler = function (ev) {\n        // The pointerdown event signals the start of a touch interaction.\n        // This event is cached to support 2-finger gestures\n        cacheRef.evCache.push(ev);\n        // console.log('pointerDown', ev);\n    };\n    var pointerup_handler = function (ev) {\n        // Remove this pointer from the cache and reset the target's\n        // background and border\n        remove_event(ev);\n        // If the number of pointers down is less than two then reset diff tracker\n        if (cacheRef.evCache.length < 2) {\n            cacheRef.prevDiff = -1;\n        }\n    };\n    var remove_event = function (ev) {\n        // Remove this event from the target's cache\n        for (var i = 0; i < cacheRef.evCache.length; i++) {\n            if (cacheRef.evCache[i].pointerId == ev.pointerId) {\n                cacheRef.evCache.splice(i, 1);\n                break;\n            }\n        }\n    };\n    useEffect(function () {\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            ref.current.onpointerdown = pointerdown_handler;\n            ref.current.onpointermove = pointermove_handler;\n            ref.current.onpointerup = pointerup_handler;\n            ref.current.onpointercancel = pointerup_handler;\n            ref.current.onpointerout = pointerup_handler;\n            ref.current.onpointerleave = pointerup_handler;\n        }\n    }, [ref === null || ref === void 0 ? void 0 : ref.current]);\n    return zoomingState\n        ? { zoomingState: zoomingState[0], pinchState: zoomingState[1] }\n        : { zoomingState: null, pinchState: 0 };\n};\nexport default usePinchZoom;\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,OAAO,IAAIC,SAAJ;;AACP,CAAC,UAAUA,SAAV,EAAqB;EAClBA,SAAS,CAAC,YAAD,CAAT,GAA0B,YAA1B;EACAA,SAAS,CAAC,aAAD,CAAT,GAA2B,aAA3B;AACH,CAHD,EAGGA,SAAS,KAAKA,SAAS,GAAG,EAAjB,CAHZ;;AAIA,IAAIC,YAAY,GAAG,UAAUC,GAAV,EAAe;EAC9B,IAAIC,QAAQ,GAAGL,OAAO,CAAC,YAAY;IAAE,OAAQ;MACzCM,OAAO,EAAE,EADgC;MAEzCC,QAAQ,EAAE,CAAC;IAF8B,CAAR;EAGhC,CAHiB,EAGf,CAACH,GAAG,CAACI,OAAL,CAHe,CAAtB;;EAIA,IAAIC,EAAE,GAAGR,QAAQ,EAAjB;EAAA,IAAqBS,YAAY,GAAGD,EAAE,CAAC,CAAD,CAAtC;EAAA,IAA2CE,eAAe,GAAGF,EAAE,CAAC,CAAD,CAA/D;;EACA,IAAIG,mBAAmB,GAAG,UAAUC,EAAV,EAAc;IACpC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,QAAQ,CAACC,OAAT,CAAiBS,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;MAC9C,IAAID,EAAE,CAACG,SAAH,IAAgBX,QAAQ,CAACC,OAAT,CAAiBQ,CAAjB,EAAoBE,SAAxC,EAAmD;QAC/CX,QAAQ,CAACC,OAAT,CAAiBQ,CAAjB,IAAsBD,EAAtB;QACA;MACH;IACJ,CAfmC,CAgBpC;;;IACA,IAAIR,QAAQ,CAACC,OAAT,CAAiBS,MAAjB,IAA2B,CAA/B,EAAkC;MAC9B;MACA;MACA,IAAIE,OAAO,GAAGC,IAAI,CAACC,GAAL,CAASd,QAAQ,CAACC,OAAT,CAAiB,CAAjB,EAAoBc,OAApB,GAA8Bf,QAAQ,CAACC,OAAT,CAAiB,CAAjB,EAAoBc,OAA3D,CAAd;;MACA,IAAIf,QAAQ,CAACE,QAAT,GAAoB,CAAxB,EAA2B;QACvB,IAAIU,OAAO,GAAGZ,QAAQ,CAACE,QAAvB,EAAiC;UAC7B;UACAI,eAAe,CAAC,CAACT,SAAS,CAACmB,UAAX,EAAuBJ,OAAvB,CAAD,CAAf;QACH;;QACD,IAAIA,OAAO,GAAGZ,QAAQ,CAACE,QAAvB,EAAiC;UAC7B;UACAI,eAAe,CAAC,CAACT,SAAS,CAACoB,WAAX,EAAwBL,OAAxB,CAAD,CAAf;QACH;MACJ,CAb6B,CAc9B;;;MACAZ,QAAQ,CAACE,QAAT,GAAoBU,OAApB;IACH;EACJ,CAlCD;;EAmCA,IAAIM,mBAAmB,GAAG,UAAUV,EAAV,EAAc;IACpC;IACA;IACAR,QAAQ,CAACC,OAAT,CAAiBkB,IAAjB,CAAsBX,EAAtB,EAHoC,CAIpC;EACH,CALD;;EAMA,IAAIY,iBAAiB,GAAG,UAAUZ,EAAV,EAAc;IAClC;IACA;IACAa,YAAY,CAACb,EAAD,CAAZ,CAHkC,CAIlC;;IACA,IAAIR,QAAQ,CAACC,OAAT,CAAiBS,MAAjB,GAA0B,CAA9B,EAAiC;MAC7BV,QAAQ,CAACE,QAAT,GAAoB,CAAC,CAArB;IACH;EACJ,CARD;;EASA,IAAImB,YAAY,GAAG,UAAUb,EAAV,EAAc;IAC7B;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,QAAQ,CAACC,OAAT,CAAiBS,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;MAC9C,IAAIT,QAAQ,CAACC,OAAT,CAAiBQ,CAAjB,EAAoBE,SAApB,IAAiCH,EAAE,CAACG,SAAxC,EAAmD;QAC/CX,QAAQ,CAACC,OAAT,CAAiBqB,MAAjB,CAAwBb,CAAxB,EAA2B,CAA3B;QACA;MACH;IACJ;EACJ,CARD;;EASAf,SAAS,CAAC,YAAY;IAClB,IAAIK,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACI,OAAlD,EAA2D;MACvDJ,GAAG,CAACI,OAAJ,CAAYoB,aAAZ,GAA4BL,mBAA5B;MACAnB,GAAG,CAACI,OAAJ,CAAYqB,aAAZ,GAA4BjB,mBAA5B;MACAR,GAAG,CAACI,OAAJ,CAAYsB,WAAZ,GAA0BL,iBAA1B;MACArB,GAAG,CAACI,OAAJ,CAAYuB,eAAZ,GAA8BN,iBAA9B;MACArB,GAAG,CAACI,OAAJ,CAAYwB,YAAZ,GAA2BP,iBAA3B;MACArB,GAAG,CAACI,OAAJ,CAAYyB,cAAZ,GAA6BR,iBAA7B;IACH;EACJ,CATQ,EASN,CAACrB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACI,OAA/C,CATM,CAAT;EAUA,OAAOE,YAAY,GACb;IAAEA,YAAY,EAAEA,YAAY,CAAC,CAAD,CAA5B;IAAiCwB,UAAU,EAAExB,YAAY,CAAC,CAAD;EAAzD,CADa,GAEb;IAAEA,YAAY,EAAE,IAAhB;IAAsBwB,UAAU,EAAE;EAAlC,CAFN;AAGH,CA9ED;;AA+EA,eAAe/B,YAAf"},"metadata":{},"sourceType":"module"}